zkex.grid.Detail=zk.$extends(zul.Widget,{$define:{open:function(){this.open(this._open,true)},contentStyle:function(){var a=this.$n("cave");if(a){a.cssText=this._contentStyle||""}},contentSclass:function(){var a=this.$n("cave");if(a){a.className=this._contentSclass||""}}},getZclass:function(){return this._zclass!=null?this._zclass:"z-detail"},onShow:function(){if(this._open){var a=this.getZclass();if(!jq(this).hasClass(a+"-expd")){this.open(this._open,true)}}},bind_:function(){this.$supers(zkex.grid.Detail,"bind_",arguments);this.parent.listen("onStripe",this);if(this._open&&zk(this).isRealVisible()){this.open(this._open,true)}zWatch.listen({onShow:this})},unbind_:function(){this.parent.unlisten("onStripe",this);if(this._open){this.open(false,true)}zWatch.unlisten({onShow:this});this.$supers(zkex.grid.Detail,"unbind_",arguments)},onStripe:function(b){if(this._open){var a=this.$n("fake"),c=this.getZclass();a.className=this.parent.$n().className+" "+c+"-faker"}},doMouseOver_:function(a){if(!this.fireX(a).stopped){var b=this.parent;if(b){b=b.parent;if(b){b.doMouseOver_(a)}}}},doClick_:function(a){if(a.domTarget==this.$n("img")){this.open((this._open=!this._open));a.stop()}this.$supers("doClick_",arguments)},open:function(g,i){var e=this.$n();if(e){var k=this.$n("cave"),f=this.$n("chdextr"),j=f.parentNode,p=this.parent,a=p?p.getGrid():null,c=a?a.ebodytbl:null,d=c?c.clientWidth:0,b=this.getZclass();jq(e)[g?"addClass":"removeClass"](b+"-expd");if(g){var m=j.parentNode.insertRow(j.rowIndex-j.parentNode.rows[0].rowIndex+1),l=m.insertCell(0),o=p?p.getZclass():j.className,h=a.getOddRowSclass();if(p&&j.className.indexOf(h)>=0){o+=" "+h}m.id=this.uuid+"-fake";l.colSpan=zk(j).ncols(true)-1;jq(m).addClass(o+" "+b+"-faker");f.rowSpan=2;l.appendChild(k);k.style.display="";zUtl.fireShown(this)}else{var m=this.$n("fake");k.style.display="none";zjq._fixedVParent(k);e.appendChild(k);f.rowSpan=1;jq(m).remove();this.clearCache()}if(!i){this.fire("onOpen",{open:g})}if(c){a._fixhdwcnt=a._fixhdwcnt||0;if(!a._fixhdwcnt++){a._fixhdoldwd=d}setTimeout(function(){if(!--a._fixhdwcnt&&a._fixhdoldwd!=c.clientWidth){a._calcSize()}},250)}}}});